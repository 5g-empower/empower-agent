%script

# read from a hand-written IPSummaryDump file; check headers, emit to a dump
click -e "
i :: Idle
	-> r :: RadixIPLookup()
	-> i; r[1] -> i; r[2] -> i;
DriverManager(
	write r.add 18.26/16 1.0.0.1 0,
	save r.lookup 18.26.4.9 -,
	write r.add 18.26.0/18 2.0.0.2 1,
	save r.lookup 18.26.4.9 -,
	write r.add 18.26.0/17 3.0.0.3 2,
	save r.lookup 18.26.4.9 -,
	write r.remove 18.26.0/18 2.0.0.2 1,
	save r.lookup 18.26.4.9 -,
	write r.remove 18.26.0/16 1.0.0.1 0,
	save r.lookup 18.26.4.9 -,
	write r.add 18.26.0/12 4.0.0.4 0,
	save r.lookup 18.26.4.9 -,
	write r.remove 18.26.0/17 3.0.0.3 2,
	save r.lookup 18.26.4.9 -,
	write r.add 18.26.4.9/32 5.0.0.5 0,
	save r.lookup 18.26.4.9 -,
	write r.remove 18.26.4.9/32 5.0.0.5 0,
	save r.lookup 18.26.4.9 -,
)
"

%expect stdout
0 1.0.0.1
1 2.0.0.2
1 2.0.0.2
2 3.0.0.3
2 3.0.0.3
2 3.0.0.3
0 4.0.0.4
0 5.0.0.5
0 4.0.0.4

%ignore
!.*
