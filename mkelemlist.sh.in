#!/bin/sh

# mkelemlist.sh -- script creates element lists during build process
# Eddie Kohler
#
# Copyright (c) 1999 Massachusetts Institute of Technology.
#
# This software is being provided by the copyright holders under the GNU
# General Public License, either version 2 or, at your discretion, any later
# version. For more information, see the `COPYRIGHT' file in the source
# distribution.

for dir in @POSSIBLE_TARGETS@; do
  f=$dir/elements.conf
  echo "$dir@element_groups@" | (cd @top_srcdir@; sh ./findelements.sh -x) > $f~
  if test -r $f; then
    if diff $f $f~ >/dev/null 2>&1; then
      rm $f~
      continue
    fi
  fi
  mv $f~ $f
  rm -f $dir/elements.d
done
