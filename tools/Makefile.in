# Warning: this file must be usable by regular make
# (unlike the Makefiles in subdirectories).

SHELL = @SHELL@
@SUBMAKE@

top_srcdir = @top_srcdir@
srcdir = @srcdir@
top_builddir = ..
subdir = tools

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
INSTALL = @INSTALL@
mkinstalldirs = @top_srcdir@/mkinstalldirs

TOOLDIRS = @TOOLDIRS@
TARGETS = @TOOL_TARGETS@

all: $(TARGETS)

lib: always Makefile
	@cd lib; $(MAKE) all
click-align: lib Makefile
	@cd click-align; $(MAKE) all-local
click-check: lib Makefile
	@cd click-check; $(MAKE) all-local
click-combine: lib Makefile
	@cd click-combine; $(MAKE) all-local
click-devirtualize: lib Makefile
	@cd click-devirtualize; $(MAKE) all-local
click-fastclassifier: lib Makefile
	@cd click-fastclassifier; $(MAKE) all-local
click-install: lib Makefile
	@cd click-install; $(MAKE) all-local
click-ipopt: lib Makefile
	@cd click-ipopt; $(MAKE) all-local
click-undead: lib Makefile
	@cd click-undead; $(MAKE) all-local
click-xform: lib Makefile
	@cd click-xform; $(MAKE) all-local
udpgen: Makefile
	@cd udpgen; $(MAKE) all
always:
	@:

Makefile: $(srcdir)/Makefile.in
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_ELEMLISTS=no CONFIG_HEADERS= $(SHELL) ./config.status

click-compile: $(srcdir)/click-compile.in
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_ELEMLISTS=no CONFIG_HEADERS= $(SHELL) ./config.status
	@chmod +x click-compile; touch click-compile

clean:
	@-for d in lib $(TOOLDIRS); do (cd $$d && $(MAKE) clean); done
distclean:
	@-for d in lib $(TOOLDIRS); do (cd $$d && $(MAKE) distclean); done
	-rm -f Makefile click-compile

install: install-subdirs install-local
install-local: click-compile
	$(mkinstalldirs) $(bindir)
	@chmod +x click-compile
	$(INSTALL) click-compile $(bindir)/click-compile
install-subdirs: lib
	@for d in $(TARGETS); do (cd $$d 2>/dev/null && $(MAKE) install); done

DISTFILES = Makefile.in lib/Makefile.in \
	lib/elementt.cc lib/elementt.hh \
	lib/lexert.cc lib/lexert.hh \
	lib/routert.cc lib/routert.hh \
	lib/processingt.cc lib/processingt.hh \
	lib/toolutils.cc lib/toolutils.hh \
	lib/hashmapi.cc \
	lib/vectori.cc \
	click-align/Makefile.in \
	click-align/click-align.cc \
	click-align/alignment.cc click-align/alignment.hh \
	click-align/alignclass.cc click-align/alignclass.hh \
	click-check/Makefile.in \
	click-check/click-check.cc \
	click-combine/Makefile.in \
	click-combine/click-combine.cc click-combine/click-uncombine.cc \
	click-compile.in \
	click-devirtualize/Makefile.in \
	click-devirtualize/click-devirtualize.cc \
	click-devirtualize/cxxclass.cc click-devirtualize/cxxclass.hh \
	click-devirtualize/signature.cc click-devirtualize/signature.hh \
	click-devirtualize/specializer.cc click-devirtualize/specializer.hh \
	click-fastclassifier/Makefile.in \
	click-fastclassifier/click-fastclassifier.cc \
	click-install/Makefile.in \
	click-install/click-install.cc \
	click-install/click-uninstall.cc \
	click-undead/Makefile.in \
	click-undead/click-undead.cc \
	click-xform/Makefile.in \
	click-xform/adjacency.cc click-xform/adjacency.hh \
	click-xform/click-xform.cc \
	udpgen/Makefile.in udpgen/udpgen.c udpgen/udpcount.c

distdir:
	rm -rf $(distdir)
	mkdir $(distdir)
	@-chmod 777 $(distdir)
	@-for d in lib $(TOOLDIRS); do mkdir $(distdir)/$$d; chmod 777 $(distdir)/$$d; done
	@for file in $(DISTFILES); do \
	  d=$(srcdir); \
	  if test -d $$d/$$file; then \
	    cp -pr $$d/$$file $(distdir)/$$file; \
	  else \
	    test -f $(distdir)/$$file \
	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
	    || cp -p $$d/$$file $(distdir)/$$file || :; \
	  fi; \
	done


.PHONY: all always lib $(TOOLDIRS) clean distclean distdir install install-man install-subdirs
