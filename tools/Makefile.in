# Warning: this file must be usable by regular make
# (unlike the Makefiles in subdirectories).

SHELL = @SHELL@
@SUBMAKE@

top_srcdir = @top_srcdir@
srcdir = @srcdir@
top_builddir = ..
subdir = tools

TOOLS = click-align click-fastclassifier click-install click-xform
TARGETS = @TOOL_TARGETS@

all: $(TARGETS)

click-align: Makefile
	@cd click-align; $(MAKE) all
click-fastclassifier: Makefile
	@cd click-fastclassifier; $(MAKE) all
click-install: Makefile
	@cd click-install; $(MAKE) all
click-xform: Makefile
	@cd click-xform; $(MAKE) all

Makefile: $(srcdir)/Makefile.in
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_ELEMLISTS=no CONFIG_HEADERS= $(SHELL) ./config.status

clean:
	@-for d in $(TOOLS); do (cd $$d; $(MAKE) clean); done
distclean:
	@-for d in $(TOOLS); do (cd $$d; $(MAKE) distclean); done
	-rm -f Makefile

install:
	@for d in $(TARGETS); do (cd $$d; $(MAKE) install); done
install-man:
	@for d in $(TARGETS); do (cd $$d; $(MAKE) install-man); done

DISTFILES = Makefile.in \
	lib/elementt.cc lib/elementt.hh \
	lib/lexert.cc lib/lexert.hh \
	lib/routert.cc lib/routert.hh \
	lib/hashmapi.cc \
	lib/vectori.cc \
	click-align/Makefile.in \
	click-align/click-align.cc \
	click-align/alignment.cc click-align/alignment.hh \
	click-align/alignclass.cc click-align/alignclass.hh \
	click-fastclassifier/Makefile.in \
	click-fastclassifier/click-fastclassifier.cc \
	click-install/Makefile.in \
	click-install/click-install.cc \
	click-xform/Makefile.in \
	click-xform/click-xform.cc

distdir:
	mkdir $(distdir)
	@-chmod 777 $(distdir)
	@-for d in lib $(TOOLS); do mkdir $(distdir)/$$d; chmod 777 $(distdir)/$$d; done
	@for file in $(DISTFILES); do \
	  d=$(srcdir); \
	  if test -d $$d/$$file; then \
	    cp -pr $$d/$$file $(distdir)/$$file; \
	  else \
	    test -f $(distdir)/$$file \
	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
	    || cp -p $$d/$$file $(distdir)/$$file || :; \
	  fi; \
	done


.PHONY: all $(TOOLS) clean distclean distdir install install-man
