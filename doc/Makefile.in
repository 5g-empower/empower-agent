SHELL = @SHELL@

srcdir := @srcdir@
top_srcdir := @top_srcdir@
top_builddir := ..
subdir := doc

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
mandir = @mandir@
datadir = @datadir@/click

PERL = @PERL@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL@ -m 644
MAKEINFO = @MAKEINFO@
TEXI2DVI = @TEXI2DVI@
mkinstalldirs = @top_srcdir@/mkinstalldirs

all: install Makefile

Makefile: $(srcdir)/Makefile.in
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status

install: install-man
	$(mkinstalldirs) $(bindir)
	$(INSTALL) $(srcdir)/click-elem2man $(bindir)/click-elem2man
install-man:
	$(mkinstalldirs) $(mandir)/man1 $(mandir)/man3 $(mandir)/man5 $(mandir)/man7 $(mandir)/man8 $(mandir)/mann
	$(INSTALL_DATA) $(srcdir)/click.1 $(mandir)/man1/click.1
	$(INSTALL_DATA) $(srcdir)/click.5 $(mandir)/man5/click.5
	$(INSTALL_DATA) $(srcdir)/click.o.8 $(mandir)/man8/click.o.8
	$(INSTALL_DATA) $(srcdir)/click-align.1 $(mandir)/man1/click-align.1
	$(INSTALL_DATA) $(srcdir)/click-combine.1 $(mandir)/man1/click-combine.1
	$(INSTALL_DATA) $(srcdir)/click-devirtualize.1 $(mandir)/man1/click-devirtualize.1
	$(INSTALL_DATA) $(srcdir)/click-fastclassifier.1 $(mandir)/man1/click-fastclassifier.1
	$(INSTALL_DATA) $(srcdir)/click-install.1 $(mandir)/man1/click-install.1
	$(INSTALL_DATA) $(srcdir)/click-uncombine.1 $(mandir)/man1/click-uncombine.1
	$(INSTALL_DATA) $(srcdir)/click-undead.1 $(mandir)/man1/click-undead.1
	$(INSTALL_DATA) $(srcdir)/click-uninstall.1 $(mandir)/man1/click-uninstall.1
	$(INSTALL_DATA) $(srcdir)/click-xform.1 $(mandir)/man1/click-xform.1
	$(INSTALL_DATA) $(srcdir)/elementdoc.7 $(mandir)/man7/elementdoc.7
	$(top_srcdir)/click-buildtool findelem -a -p $(top_srcdir) | $(PERL) $(srcdir)/click-elem2man -l -d $(mandir)/mann -f -

click.info: $(srcdir)/click.texi
	$(MAKEINFO) $(srcdir)/click.texi
click.dvi: $(srcdir)/click.texi always
	$(TEXI2DVI) $(srcdir)/click.texi

always:
	@:

clean:
distclean: clean
	-rm -f Makefile

.PHONY: all clean distclean install install-man always
